<app-headear></app-headear>
<div class="wrapper">
  <div class="register-container">
    <div class="logo-container">
      <span class="material-icons logo-icon">local_hospital</span>
      <h1 class="logo">Donate</h1>
    </div>

    <p class="subtitle">Cadastre-se agora!</p>
    <p class="description">
      Seja uma doadora ou encontre leite materno. Preencha o formul치rio abaixo 游눘
    </p>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      <!-- Mensagem de erro em destaque -->
      <div *ngIf="mensagemErro" class="alert-error">
        <span class="material-icons">error_outline</span>
        {{ mensagemErro }}
      </div>

      <!-- Campos de entrada -->
      <div class="input-group" [ngClass]="{'error': registerForm.get('nome')?.invalid && registerForm.get('nome')?.touched}">
        <input matInput formControlName="nome" placeholder="Nome completo" />
        <span class="material-icons input-icon">person</span>
      </div>

      <div class="input-group" [ngClass]="{'error': registerForm.get('email')?.invalid && registerForm.get('email')?.touched}">
        <input matInput type="email" formControlName="email" placeholder="Email" />
        <span class="material-icons input-icon">email</span>
      </div>

      <div class="input-group" [ngClass]="{'error': registerForm.get('telefone')?.invalid && registerForm.get('telefone')?.touched}">
        <input matInput formControlName="telefone" placeholder="Telefone" />
        <span class="material-icons input-icon">phone</span>
      </div>

      <div class="input-group" [ngClass]="{'error': registerForm.get('cpf')?.invalid && registerForm.get('cpf')?.touched}">
        <input matInput formControlName="cpf" placeholder="CPF" />
        <span class="material-icons input-icon">badge</span>
      </div>

      <div class="input-group" [ngClass]="{'error': registerForm.get('senha')?.invalid && registerForm.get('senha')?.touched}">
        <input matInput type="password" formControlName="senha" placeholder="Senha" />
        <span class="material-icons input-icon">lock</span>
      </div>

      <div class="input-group" [ngClass]="{'error': registerForm.get('confirmarSenha')?.invalid && registerForm.get('confirmarSenha')?.touched}">
        <input matInput type="password" formControlName="confirmarSenha" placeholder="Repetir senha" />
        <span class="material-icons input-icon">lock</span>
      </div>

      <!-- Tipo de usu치rio -->
      <div class="perfil-group" [ngClass]="{'error': perfilNaoSelecionadoErro}">
        <label>Tipo de usu치rio:</label>
        <mat-radio-group formControlName="perfil" class="radio-group">
          <mat-radio-button value="doadora">Doadora</mat-radio-button>
          <mat-radio-button value="receptora">Receptora</mat-radio-button>
          <mat-radio-button value="profissional">Profissional de sa칰de</mat-radio-button>
        </mat-radio-group>
      </div>

      <!-- Munic칤pio -->
      <div class="input-group" [ngClass]="{'error': municipioNaoSelecionadoErro}">
        <input matInput [matAutocomplete]="auto" [formControl]="municipioControl" placeholder="Munic칤pio" />
        <span class="material-icons input-icon">place</span>
        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onMunicipioSelecionado($event)">
          <mat-option *ngFor="let municipio of municipiosFiltrados$ | async" [value]="municipio.nome">
            {{ municipio.nome }} - {{ municipio.unidadeFederativa.sigla }}
          </mat-option>
        </mat-autocomplete>
      </div>

      <!-- Campos ocultos -->
      <input type="hidden" formControlName="id_municipio" />
      <input type="hidden" formControlName="latitude" />
      <input type="hidden" formControlName="longitude" />

      <!-- Checkbox de pol칤tica usando Reactive Forms -->
      <div class="policy-group" [ngClass]="{'error': politicaControl.invalid && submitAttempted}">
        <mat-checkbox [formControl]="politicaControl">
          Li e aceito a <a routerLink="/politica-de-privacidade" target="_blank">pol칤tica de uso de dados pessoais</a>.
        </mat-checkbox>
        <div *ngIf="politicaControl.invalid && submitAttempted" class="error-text">
          Voc칡 deve aceitar a pol칤tica para se cadastrar.
        </div>
      </div>

      <button type="submit">Cadastrar</button>
    </form>

    <p class="register-prompt">
      J치 tem uma conta? <a routerLink="/login">Entrar</a>
    </p>
  </div>
</div>
