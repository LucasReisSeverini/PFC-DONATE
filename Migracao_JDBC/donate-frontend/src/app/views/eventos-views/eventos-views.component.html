<app-headear></app-headear>
<div class="eventos-container">

  <!-- Header da p√°gina -->
  <div class="eventos-header">
    <button type="button" class="btn-voltar" (click)="voltarPainel()">
      ‚Üê Voltar
    </button>
    <h2>Eventos & Novidades</h2>
  </div>

  <!-- Filtros -->
  <div class="filtros">

    <!-- Filtro por UF -->
    <select [(ngModel)]="filtroUF" (change)="onUFChange()">
      <option [ngValue]="null">Todas as UFs</option>
      <option *ngFor="let uf of ufs" [ngValue]="uf.id">{{ uf.nome }}</option>
    </select>

    <!-- Filtro por Munic√≠pio -->
    <select [(ngModel)]="filtroMunicipio" (change)="aplicarFiltros()">
      <option [ngValue]="null">Todos os munic√≠pios</option>
      <option *ngFor="let m of municipios" [ngValue]="m.id">{{ m.nome }}</option>
    </select>

    <!-- Filtro por Tipo -->
    <select [(ngModel)]="filtroTipo" (change)="aplicarFiltros()">
      <option value="Todos">Todos</option>
      <option value="evento">Evento</option>
      <option value="noticia">Not√≠cia</option>
    </select>

    <!-- Filtros por Data -->
    <div class="filtros-datas">
      <label>
        Data Inicial
        <input type="date" [(ngModel)]="filtroDataInicio" (change)="aplicarFiltros()">
      </label>
      <label>
        Data Final
        <input type="date" [(ngModel)]="filtroDataFim" (change)="aplicarFiltros()">
      </label>
    </div>

  </div>

  <!-- Bot√£o Eventos Pr√≥ximos -->
  <div class="eventos-proximos">
    <button type="button" class="btn-proximos" (click)="eventosProximos()">
      üìç Eventos pr√≥ximos
    </button>
  </div>

  <!-- Cards de eventos -->
  <div class="cards">
    <mat-card
      *ngFor="let evento of eventosFiltrados"
      class="card-evento"
      [ngClass]="evento.tipo"
      (click)="abrirDetalhe(evento)">

      <mat-card-header>
        <mat-card-title>{{ evento.titulo }}</mat-card-title>
        <mat-card-subtitle>
          {{ evento.data | date:'dd/MM/yyyy' }} - {{ evento.tipo | titlecase }}
          <span *ngIf="evento.municipioNome"> - {{ evento.municipioNome }}</span>
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <p>
          {{ evento.descricao | slice:0:100 }}
          {{ evento.descricao.length > 100 ? '...' : '' }}
        </p>
      </mat-card-content>
    </mat-card>
  </div>
</div>
